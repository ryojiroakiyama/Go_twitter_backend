<svg host="65bd71144e" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2147px" height="821px" viewBox="-0.5 -0.5 2147 821" content="&lt;mxfile&gt;&lt;diagram id=&quot;5NDQA8FCfU3ySAwWwgME&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;">
    <defs/>
    <g>
        <ellipse cx="1104" cy="410" rx="409.75" ry="409.75" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <ellipse cx="1104" cy="414.5" rx="237.00000000000003" ry="237.00000000000003" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <rect x="964" y="342" width="69" height="26" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 355px; margin-left: 998px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">
                                <span style="">
                                    domain層
                                </span>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="998" y="359" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    domain層
                </text>
            </switch>
        </g>
        <rect x="920" y="368" width="393" height="84" fill="rgb(255, 255, 255)" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 410px; margin-left: 1117px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">
                                <div style="border-color: var(--border-color); text-align: left;">
                                    <span style="border-color: var(--border-color); background-color: initial;">
                                        domainパッケージ
                                    </span>
                                </div>
                                <div style="border-color: var(--border-color); text-align: left;">
                                    <span style="border-color: var(--border-color); background-color: initial;">
                                        object: ドメインのデータ・モノを表現するオブジェクト。
                                    </span>
                                </div>
                                <div style="border-color: var(--border-color); text-align: left;">
                                    <span style="border-color: var(--border-color); background-color: initial;">
                                        今回は簡単のため、DBに保存する際のDTO
                                    </span>
                                </div>
                                <div style="border-color: var(--border-color); text-align: left;">
                                    <span style="border-color: var(--border-color); background-color: initial;">
                                        (Data Transfer Object)の役目も兼ねている。
                                    </span>
                                </div>
                                <font style="border-color: var(--border-color);">
                                    <div style="border-color: var(--border-color); text-align: left;">
                                        <span style="border-color: var(--border-color); background-color: initial;">
                                            repository: Entityの永続化処理を抽象化して定義したインタフェース。
                                        </span>
                                    </div>
                                </font>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="1117" y="414" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    domainパッケージ...
                </text>
            </switch>
        </g>
        <path d="M 1396 411.28 L 1319.37 410.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 1314.12 410.91 L 1321.13 407.44 L 1319.37 410.93 L 1321.1 414.44 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 1457.73 160 L 1178.96 364.24" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 1174.73 367.34 L 1178.31 360.38 L 1178.96 364.24 L 1182.44 366.03 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <rect x="1052" y="90" width="907" height="70" fill="rgb(255, 255, 255)" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 125px; margin-left: 1054px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">
                                appパッケージ
                                <br/>
                                Daoの組み立てと
                                <span style="background-color: initial;">
                                    handler/usecase層とinfra層の橋渡し（
                                </span>
                                Daoを介して、handler/usecase層にrepositoryを実装したオブジェクトを提供する）
                                <span style="background-color: initial;">
                                    の役目を持つ。
                                </span>
                                <br/>
                                <div style="">
                                    この要素はクリーンアーキテクチャには登場しないが、シングルトンの管理やDB初期化処理などを一箇所にまとめた便利オブジェクトとして用いられることがある。
                                </div>
                                <div style="">
                                    Dao: repositoryを実装したオブジェクトを返却するDIコンテナ。
                                    <br/>
                                </div>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="1054" y="129" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">
                    appパッケージ...
                </text>
            </switch>
        </g>
        <path d="M 493.97 380 L 1044.4 128.07" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 1049.17 125.89 L 1044.26 131.98 L 1044.4 128.07 L 1041.35 125.62 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 835 412.01 L 913.63 411.45" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 918.88 411.41 L 911.91 414.96 L 913.63 411.45 L 911.86 407.96 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <rect x="0" y="380" width="835" height="70" fill="rgb(255, 255, 255)" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-end; width: 1px; height: 1px; padding-top: 415px; margin-left: 833px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: right;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">
                                handlerパッケージ
                                <br/>
                                UIのリクエストを処理する。データベースに関する操作は（appを返してrepositoryを実装したオブジェクトを取得し）repositoryのメソッドを呼び出す。
                                <br/>
                                domain層の呼び出し部分はusecase層に分けるのが一般的なクリーンアーキテクチャだが、今回は簡単のためhandlerとusecaseを同じ層にしている。
                                <br/>
                                <span style="color: rgb(51, 51, 51); text-align: left; background-color: rgb(251, 251, 251);">
                                    テスタブルであるポイント: テストコードでrepositoryの実装をモックすることで、handlerに焦点を当てたテストができる。
                                </span>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="833" y="419" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="end">
                    handlerパッケージ...
                </text>
            </switch>
        </g>
        <rect x="1396" y="352" width="53" height="26" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 365px; margin-left: 1423px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">
                                <span style="color: rgb(0, 0, 0); text-align: left;">
                                    infra層
                                </span>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="1423" y="369" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    infra層
                </text>
            </switch>
        </g>
        <rect x="1052" y="62" width="114" height="26" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 75px; margin-left: 1109px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">
                                <div style="text-align: left;">
                                    依存性マネージャ
                                </div>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="1109" y="79" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    依存性マネージャ
                </text>
            </switch>
        </g>
        <rect x="713" y="356" width="118" height="26" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 369px; margin-left: 772px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">
                                <span style="color: rgb(0, 0, 0); text-align: right;">
                                    handler/usecase層
                                </span>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="772" y="373" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    handler/usecase層
                </text>
            </switch>
        </g>
        <rect x="1396" y="378" width="749" height="70" fill="rgb(255, 255, 255)" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 413px; margin-left: 1398px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">
                                daoパッケージ（data access object。daoはデータベースの操作に限定されたもので[infra]という言葉はさらに広い領域を表すらしい。）
                                <br/>
                                repositoryインタフェースを実装している。
                                <br/>
                                <span style="color: rgb(51, 51, 51); background-color: rgb(251, 251, 251);">
                                    DBなど外部モジュール へアクセスし、
                                </span>
                                <span style="color: rgb(51, 51, 51); background-color: rgb(251, 251, 251);">
                                    データの保存・取得・更新などの処理を行う。
                                    <br/>
                                    テスタブルであるポイント: テストコードからはrepositoryを呼び出すことでdaoに焦点を当てたテストができる。
                                    <br/>
                                </span>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="1398" y="417" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">
                    daoパッケージ（data access object。daoはデータベースの操作に限定されたもので[infra]という言葉はさらに広い領域を表すらしい。）...
                </text>
            </switch>
        </g>
    </g>
    <switch>
        <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
        <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
            <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Text is not SVG - cannot display
            </text>
        </a>
    </switch>
</svg>